# Zed Editor Theme Integration

## Overview

This integration automatically generates a Zed editor theme that matches your Material You color scheme from your wallpaper.

## How It Works

1. The theme generation reads two sources:
   - `~/.local/state/quickshell/user/generated/colors.json` - Material You colors (primary, secondary, tertiary, surface, etc.)
   - `~/.local/state/quickshell/user/generated/material_colors.scss` - Terminal colors (term0-term15)

2. It creates a complete Zed theme with:
   - **Dark and Light variants** - Both theme types based on your wallpaper colors
   - **Complete UI styling** - Borders, backgrounds, text colors, elements, panels, etc.
   - **Syntax highlighting** - Colors for keywords, strings, functions, comments, etc.
   - **Terminal integration** - Terminal colors match your system terminal
   - **Version control colors** - Added, modified, deleted, conflict markers
   - **Multiplayer cursors** - Colors for collaborative editing
   - **Diagnostic colors** - Errors, warnings, hints, info, success

3. The theme is saved to: `~/.config/zed/themes/ii-theme.json`

4. **It also updates Zed's settings.json** to set "iNiR Dark" and "iNiR Light" as the default themes for dark and light modes:
   ```json
   {
     "theme": {
       "mode": "system",
       "light": "iNiR Light",
       "dark": "iNiR Dark"
     }
   }
   ```

## Configuration

To enable/disable Zed theme generation, edit your config file:

```json
{
  "appearance": {
    "wallpaperTheming": {
      "enableZed": true  // or false to disable
    }
  }
}
```

Default is `true` if not specified.

### Zed Settings File

The integration also manages Zed's `~/.config/zed/settings.json` file to set up the iNiR themes as defaults:

- **"iNiR Dark"** - Set as the default dark theme
- **"iNiR Light"** - Set as the default light theme
- **"system"** mode - Zed will use the appropriate theme based on your system appearance

The settings are automatically updated when the theme is generated (no manual configuration needed).

## Usage

1. Make sure you have run your wallpaper theming system (the theme is generated automatically)
2. Open Zed
3. Go to **Settings** (Ctrl+,) or **Zed** menu â†’ **Settings**
4. Click on **Themes** in the sidebar
5. Select **"iNiR Dark"** or **"iNiR Light"** from the **Theme** dropdown
6. The theme will be applied immediately

The theme updates automatically whenever you change your wallpaper.



## File Locations

- **Generated theme**: `~/.config/zed/themes/ii-theme.json`
- **Theme name in Zed**: "iNiR Dark" or "iNiR Light"
- **Log file**: `~/.local/state/quickshell/user/generated/code_editor_themes.log`

## Troubleshooting

### Theme doesn't appear in Zed's theme list

1. **Check if the theme file exists**:
   ```bash
   ls -la ~/.config/zed/themes/ii-theme.json
   ```

2. **Verify the JSON is valid**:
   ```bash
   python3 -m json.tool ~/.config/zed/themes/ii-theme.json
   ```

3. **Check the log file**:
   ```bash
   cat ~/.local/state/quickshell/user/generated/code_editor_themes.log
   ```

4. **Restart Zed** - Sometimes Zed needs to be restarted to detect new themes

5. **Check if the config directory exists**:
   ```bash
   ls -la ~/.config/zed/
   ```

### Theme is generated but colors look wrong

- Make sure `colors.json` and `material_colors.scss` exist and are up-to-date


### Theme generation fails

- Check that Python 3 is installed: `python3 --version`
- Check the virtual environment path in the log file
- Ensure you have write permissions to `~/.config/zed/themes/`

## Requirements

- Zed editor installed
- Python 3 (for theme generation)
- `colors.json` and `material_colors.scss` generated by your wallpaper theming system
- `~/.config/zed/` directory exists (Zed creates this on first run)

## Integration with System

The Zed theme integration is part of the `applycolor.sh` script's code editors section. It runs automatically when:

- You change your wallpaper
- The theme system is enabled

## Customization

If you want to customize the Zed theme further:

1. Edit the generated theme file: `~/.config/zed/themes/ii-theme.json`
2. Or modify the color mappings in: `/home/admin/inir/scripts/colors/generate_terminal_configs.py`
   - Look for the `generate_zed_config()` function
   - Adjust the `build_zed_dark_theme()` and `build_zed_light_theme()` functions

## Credits

- Based on Material You design system
- Zed theme schema: https://zed.dev/schema/themes/v0.2.0.json
- Integrated with iNiR Theme System